---
title: 第2-14节：增强装配-本地mcp
pay: https://t.zsxq.com/a8AJj
---

# 《AI Agent 脚手架》第2-14节：增强装配-本地mcp

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[待更新](#)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

在用户使用 ai agent 脚手架的时候，会有诉求扩展一些自己实现的 mcp 服务。比如，做一些智能体客服场景，或者公司内部的系统巡检场景，这些场景并没有提供统一的 mcp 服务，则可能都要自己扩展，扩展后装配到整个智能体中。

同时因为引入了多种类型的 mcp 装配，sse、stdio 又加上这种本地自己实现的，所以这块还要做一些策略处理。

## 二、流程设计

如图，增强 mcp 服务装配能力设计；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-agent-scaffold/part-2/2-14/images/ai-agent-scaffold-2-14-01.png" width="950px"/>
</div>

- ChatModelNode 装配 MCP 主要是 sse、stdio 两种方式，通过 if···else 判断的方式进行处理。但现在又要扩展新的方式装配，则不适合继续编写 if···else 代码，而是要通过类来拆分一个大的方法。
- 这块会使用到工厂 + 策略接口来扩展实现，并区分出 mcp 客户端、服务端。客户端负责策略装配，服务端负责用户自己扩展新的 mcp 服务。
