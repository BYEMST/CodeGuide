---
title: 第2-4节：装配域结构化定义
pay: https://t.zsxq.com/a8AJj
---

# 《AI Agent 脚手架》第2-4节：装配域结构化定义

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[待更新](#)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

通过`单一职责`、`规则树（组合模式）`、`工厂`、`上下文对象`、`泛型`等设计模式手段，结合领域驱动设计思想，定义智能体装配服务结构。

## 二、流程设计

如图，智能体装配结构设计；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-agent-scaffold/part-2/2-4/images/ai-agent-scaffold-2-4-01.png" width="700px"/>
</div>

- 首先，最上面的是规则树（组合模式）的设计模块框架，用于各项节点流转实现，如；RootNode、AiApiNode、ChatModelNode 等。
- 之后，定义了单一职责的 IArmoryService 装配服务接口，并通过工厂管理节点衔接服务，以及定义上下文对象。这个上下文对象，会在各个节点间记录数据并流转使用。

> 本节小傅哥先带着大家把功能实现框架结构定义出来，让大家厘清关于这样的框架结构设计（这是一个非常通用的手段）。之后在进行各个节点的编码实现。