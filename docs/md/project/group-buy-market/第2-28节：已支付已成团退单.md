---
title: 【更】第2-28节：已支付已成团退单
pay: https://t.zsxq.com/msTia
---

# 《拼团交易平台系统》第2-28节：已支付已成团退单

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/PI7bY](https://t.zsxq.com/PI7bY)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

本章节是退单流程中最后一个步骤，对已支付，已成团状态的订单进行退单操作。

通过我们在前面的流程分析，已成团的退单，则只退个人单，不会影响到全局所有人的订单。那么这里如果一个拼团有多人退单，哪怕整个队伍只有一个人没有退单，也是可以的。

注意，这类的业务流程，主要受公司的产品设计的流程影响。如果一些特点的任务，一人退单，全队解散。那么就要针对不同类型的退单，做不同的策略实现。这块可以思考下。

## 二、功能流程

如图，退单流程设计领域结构。

<div align="center">
    <img src="https://bugstack.cn/images/article/project/group-buy-market/group-buy-market-2-28-01.png" width="800px">
</div>

- 如图，本节扩展实现第3个操作，`已支付已成团退单策略`的处理。
- 注意，所有的退单策略，都要发MQ，本节把未支付未成团，也添加上MQ的发送。但要注意，添加MQ，他们都属于同一类，task 任务表要增加类型区分和 uuid 字段仿重。

