---
title: 【更】第2-4节：策略模式优惠折扣计算
pay: https://t.zsxq.com/NGF2u
---

# 《拼团交易平台系统》第2-4节：策略模式优惠折扣计算

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/inWxL](https://t.zsxq.com/inWxL)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

大家好，我是技术UP主小傅哥。

程序员的价值不在于只是完成业务需求，而是怎么架构系统、设计边界、凝练功能，让原本只是 CRUD 串联大量逻辑的代码，分区、分职责、用不同的策略模型承接。以此提高软件的交付质量，才是程序员的价值。

所以，我也从不敢说什么东西没有用。比如；DDD、设计模式，否则也不会有那么多我们日常使用源码框架，都有这些思想的体现了。

## 一、本章诉求

通过策略模式处理多类型折扣方式的逻辑计算，同时设定抽象模板，用于扩展后续人群标签的过滤。

不断的拆解功能逻辑边界的过程，比只是编写流水式代码要重要的多。在整个系统实现的过程中，要多体会这些思想。

## 二、模型设计

如图，继续在执行链路上像乐高积木一样拼装优惠折扣的计算逻辑；

<div align="center">
    <img src="https://bugstack.cn/images/article/project/group-buy-market/group-buy-market-2-4-01.png" width="750px">
</div>

- 首先，MarketNode 节点的数据异步加载工作已经在上一节完成，这一节开始使用这里的数据做折扣计算。
- 之后，折扣是在数据库中配置的，按照类型包括；ZJ - 直减、MJ - 满减、ZK - 折扣、N - n元购。那么这些不同的类型就可以用策略模型进行包装，每个实现类专门负责自己的逻辑计算。